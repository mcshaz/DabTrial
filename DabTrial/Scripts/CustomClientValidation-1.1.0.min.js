(function(n){function t(n,t,i){n.rules[t]=i,n.message&&(n.messages[t]=n.message)}function a(t,i,r){for(var u=0,f;u<r.length;u++)f=u==0?i:i+u,t.messages[f]=r[u].message,delete r[u].message,t.rules[f]=r[u],i!==f&&function e(){var t=0;if(!n.validator.methods[i]){if(++t>10)throw new ReferenceError(i+" is not defined");setTimeout(e,100);return}n.validator.methods[f]||n.validator.addMethod(f,n.validator.methods[i])}()}function v(t){var o=n.parseJSON(t.message),u=[],f,i,e=0,r,s=[];for(f in t.params)t.params.hasOwnProperty(f)&&(i={},i.key=f,i.vals=n.parseJSON(t.params[f]),u.push(i));for(;e<o.length;e++){for(i={},i.message=o[e],r=0;r<u.length;r++)i[u[r].key]=u[r].vals[e];s.push(i)}return s}function y(t){return typeof(e==="undefined")&&(e=document.getElementsByTagName("form")),"form"+n.inArray(t,e)}function u(n){return n.substr(0,n.lastIndexOf(".")+1)}function r(n,t){return n.indexOf("*.")===0&&(n=n.replace("*.",t)),n}function p(t,i){return n(document.getElementsByName(t)).map(function(n,r){return r.form==i&&r.name==t&&r||null})}function o(n,t){for(var i="pending",r=0,u=(n.files||[]).length;r<u&&i!==!1;)i=t.call(n,n.files[r]),r+=1;return i}function i(t){var u,r,f=/\bhasDatepicker\b/,i;if(t instanceof Date)return t;if(t.tagName){if(f.test(t.className))return n(t).datepicker("getDate");r=t.value}else if(t instanceof jQuery){if(!t.length)return null;if(f.test(t[0].className))return t.datepicker("getDate");r=t.val()}else if(typeof t=="string")r=t;else throw new TypeError("invalid dateArg - must be a DOM element, jQuery element, date or string representation of a date");if(!r)return null;if(u=w(r),!u){if(i=/([0-3]\d)\/([0-1]\d)\/([1-2]\d{3})\s([0-1]\d):([0-5]\d):([0-5]\d)\s([apAP]).[mM]./.exec(r),i==null||!i.length)return null;i[7].toLowerCase()=="p"&&(i[4]=parseInt(i[4]),i[4]<12&&(i[4]+=12)),u=new Date(i[3],parseInt(i[2])-1,i[1],i[4],i[5],i[6])}return u}function w(n){var t=/(\d{4})-([01]\d)-([0-3]\d)T([0-2]\d):([0-5]\d):([0-5]\d)/.exec(n),i;return t===null?null:(i=new Date(n),isNaN(i)&&(i=new Date(t[1],parseInt(t[2])-1,t[3],t[4],t[5],t[6])),i)}function h(n,t,i){var r,u,f;return i==="M"||i==="Y"?(r=(t.getFullYear()-n.getFullYear())*12+t.getMonth()-n.getMonth(),u=t.getDate()-n.getDate(),u>0?r+=u/c(t.getFullYear(),t.getMonth()+1):u<0&&(r+=u/c(t.getFullYear(),t.getMonth())),i==="M"?r:r/12):(f=s[i],(t.getTime()-n.getTime())/f)}function c(n,t){return new Date(t,n,0).getDate()}function l(n,t){if(t=parseInt(t,10),isNaN(t))throw new TypeError("weeksGestationAtBirth Must be a valid integer");if(t>=43||t<23)throw new RangeError("weeksGestationAtBirth Must be between 23 and 42");return h(n,new Date,"w")+t}var e,f,s;jQuery.validator.addMethod("dateITA",function(n,t){var l=!1,i=/^(\d{1,2})\/(\d{1,2})\/(\d{4})( ?(\d{1,2}):(\d{1,2})(:(\d{1,2}))?(:(\d{1,}))?)?( ?([aApP])\.?[mM]\.?)?$/.exec(n),f,e,u,o,s,h,r,c;return i&&i.length>4&&(f=parseInt(i[1],10),e=parseInt(i[2],10),yyyy=parseInt(i[3],10),u=parseInt(i[5]||0,10),c=(i[12]||"").toLowerCase(),u===12&&c==="a"?u-=12:u!==12&&c==="p"&&(u+=12),o=parseInt(i[6]||0,10),s=parseInt(i[8]||0,10),h=parseInt(i[10]||0,10),r=new Date(yyyy,e-1,f,u,o,s,h),l=r.getFullYear()===yyyy&&r.getMonth()===e-1&&r.getDate()===f&&r.getHours()===u&&r.getMinutes()===o&&r.getSeconds()===s&&r.getMilliseconds()===h),this.optional(t)||l},"Please enter a correct date"),n.validator.methods.date=n.validator.methods.dateITA,n.validator.unobtrusive.adapters.addBool("mustbetrue","required"),n.validator.addMethod("isvalidregex",function(n){try{var t=new RegExp(n)}catch(i){return!1}return!0}),n.validator.unobtrusive.adapters.addBool("isvalidregex"),n.validator.addMethod("maxfilesize",function(n,t,i){return o(t,function(n){return n.size<i})}),n.validator.unobtrusive.adapters.add("maxfilesize",["size"],function(n){t(n,"maxfilesize",parseInt(n.params.size,10))}),n.validator.addMethod("filetypes",function(t,i,r){var u=/\.[^.]+$/;return o(i,function(t){var i=u.exec(t.name);return i&&n.inArray(i[0].substr(1),r)>-1})}),n.validator.unobtrusive.adapters.add("filetypes",["types"],function(n){var i=n.params.types.split(",");n.message=n.message.replace("{0}",i.join(", ")),t(n,"filetypes",i)}),n.validator.addMethod("datetonow",function(t,r,u){var f=i(n(r)),e=new Date;return isNaN(f)?"pending":u==="before"?f<e:f>e}),n.validator.unobtrusive.adapters.addSingleVal("datetonow","opt"),n.validator.addMethod("regexcount",function(n,t,i){var r=(n.match(i.regex)||[]).length;return r>=i.min&&r<=i.max}),n.validator.unobtrusive.adapters.add("regexcount",["min","max","regex","regexopt"],function(n){for(var t=v(n),i=0;i<t.length;i++)t[i].regex=new RegExp(t[i].regex,t[i].regexopt),delete t[i].regexopt;a(n,"regexcount",t)}),n.validator.addMethod("comesafter",function(n,t,r){var r=i(r),u=i(t);return!u||!r?"pending":u>=r}),n.validator.addMethod("comesbefore",function(n,t,r){var r=i(r),u=i(t);return!u||!r?"pending":u<=r}),n.validator.unobtrusive.adapters.add("comesbefore",["otherdateprop","comparisondate"],function(i){if(i.params.otherdateprop){var f=u(i.element.name),e=r(i.params.otherdateprop,f),o=n(i.form).find(":input[name='"+e+"']:first");t(i,"comesbefore",o)}else t(i,"comesbefore",i.params.comparisondate)}),n.validator.unobtrusive.adapters.add("comesafter",["otherdateprop","comparisondate"],function(i){if(i.params.otherdateprop){var f=u(i.element.name),e=r(i.params.otherdateprop,f),o=n(i.form).find(":input[name='"+e+"']:first");t(i,"comesafter",o)}else t(i,"comesafter",i.params.comparisondate)}),n.validator.addMethod("dateinterval",function(t,r,u){var f=u.$otherdate?i(u.$otherdate):new Date,e=i(n(r));return!f||isNaN(f)||!e||isNaN(e)?"pending":(interval=h(e,f,u.timeunit),interval>=u.mininterval&&interval<=u.maxinterval)}),n.validator.unobtrusive.adapters.add("dateinterval",["otherdateprop","min","max","unit"],function(i){var f=i.params.otherdateprop,e={mininterval:parseInt(i.params.min,10),maxinterval:parseInt(i.params.max,10),timeunit:i.params.unit},o,s;f&&(o=u(i.element.name),s=r(f,o),e.$otherdate=n(i.form).find(":input[name='"+s+"']:first")),t(i,"dateinterval",e)}),n.validator.addMethod("trueonlyif",function(n,t,i){var r=function(){var t=this.value,n=this.type;return n&&(n==="radio"||n==="checkbox")&&!this.checked?!1:i.othervals.indexOf(t)>-1};return!t.checked||i.$otherprop.is(r)}),n.validator.unobtrusive.adapters.add("trueonlyif",["otherprop","othervals"],function(i){var e=i.params.otherprop,f={othervals:i.params.othervals.split("||")},o=u(i.element.name),s=r(e,o);f.$otherprop=n(i.form).find(":input[name='"+s+"']"),t(i,"trueonlyif",f)}),n.validator.addMethod("cgarange",function(t,r,u){var e=i(n(r)),o=u.weeksGestEl.value||40,f;return isNaN(e)||!o?"pending":(f=l(e,o),f>=u.min&&f<=u.max)}),n.validator.unobtrusive.adapters.add("cgarange",["min","max","weeksgestationprop"],function(i){var f={min:parseInt(i.params.min,10),max:parseInt(i.params.max,10)},e=u(i.element.name),o=r(i.params.weeksgestationprop,e);f.weeksGestEl=n(i.form).find(":input[name='"+o+"']")[0],t(i,"cgarange",f)}),n.validator.addMethod("wt4age",function(t,r,u){function s(){var n=i(u.$dob),t=u.$weeksGest[0].value||40,f;return(e=u.$gender.not(":not(:checked)").val()===u.maleVal,isNaN(n)||!t||!(typeof e=="boolean"))?"pending":(f=l(n,t),gausDist.zWtForAge(r.value,f,e))}function h(){return"<span class='field-validation-error'>"+gausDist.suggestedDeviationMsg(f)+"<\/span> healthy"+(e?" males":" females")+" of the same age weigh "+(f>0?"more":"less")}function c(){function i(){f=s(),n.inArray(this,u.$gender)>-1&&(e=u.$gender.not(":not(:checked)").val()===u.maleVal),t.html(h())}var t=n("#confirmWtWarnMsg");if(t.length)return i(),o.show(400),document.getElementById("confirmWtWarnOk").checked;t=n("<div id='wtWarnContainer' style='display:none'><label><input type='checkbox' id='confirmWtWarnOk' class='input-validation-error' />Confirm weight is correct - <span id='confirmWtWarnMsg'>"+h()+"<\/span><\/label><\/div>").insertAfter(".field-validation-valid[data-valmsg-for='"+r.name+"'],.field-validation-error[data-valmsg-for='"+r.name+"']").show(400).find("#confirmWtWarnMsg");u.$weeksGest.add(u.$gender).add(u.$dob).on("change",i);return!1}var e,f=s(),o=n("#wtWarnContainer");return f=="pending"?"pending":-u.zfail>f||f>u.zfail?(o.hide(),!1):-u.zwarn<f&&f<u.zwarn?(o.hide(),!0):c()}),n.validator.unobtrusive.adapters.add("wtforage",["zwarn","zfail","dobprop","weeksgestationprop","genderprop","maleval"],function(i){var e={zfail:parseFloat(i.params.zfail,10),zwarn:i.params.zwarn?parseFloat(i.params.zwarn,10):Number.MAX_VALUE,maleVal:i.params.maleval},o=u(i.element.name),f=r(i.params.weeksgestationprop,o);e.$weeksGest=n(i.form).find(":input[name='"+f+"']"),f=r(i.params.dobprop,o),e.$dob=n(i.form).find(":input[name='"+f+"']"),f=r(i.params.genderprop,o),e.$gender=n(i.form).find(":input[name='"+f+"']"),t(i,"wt4age",e)}),n.validator.addMethod("requiredgroup",function(n,t,i){for(var r=0;r<i.length;r++)if(i[r].checked===!0)return!0;return!1}),f=[],n.validator.unobtrusive.adapters.add("requiredgroup",function(n){var r=n.element.name,i=y(n.form)+r;f[i]||(f[i]=p(r,n.form)),t(n,"requiredgroup",f[i])}),s={s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5}})(jQuery)